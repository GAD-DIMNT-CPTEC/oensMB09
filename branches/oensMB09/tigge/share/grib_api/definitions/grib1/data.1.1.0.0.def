# For grib1 -> grib2

constant dataRepresentationTemplateNumber = 51;

constant PUnset = -32767;

#

 unsigned[2] N                  : read_only;
 signed[2] P           = PUnset : read_only;

 unsigned[1] JS ;
 unsigned[1] KS ;
 unsigned[1] MS ;

 alias subSetJ=JS ;
 alias subSetK=KS ;
 alias subSetM=MS ;

 constant GRIBEXShBugPresent = 1;

 meta laplacianOperator    scale(P,oneConstant,grib1divider);
 meta laplacianOperatorIsSet evaluate(P != PUnset);

 trigger(localDefinitionNumber) {
   transient TS = 0 ;
   meta TScalc spectral_truncation(JS,KS,MS,TS) : read_only,hidden;
   meta Nassigned octect_number(N,4*TScalc) : hidden ;
 }

 position offsetBeforeData;
 meta values data_g1complex_packing(
      section4Length,
      offsetBeforeData,
      offsetSection4,

      nbp,
      referenceValue,
      binaryScaleFactor,
      decimalScaleFactor,

      GRIBEXShBugPresent,
      ieeeFloats,

      laplacianOperatorIsSet,
      laplacianOperator,
      subSetJ,
      subSetK,
      subSetM,
      pentagonalResolutionParameterJ,
      pentagonalResolutionParameterK,
      pentagonalResolutionParameterM,

      halfByte,
      N
 ) : optional;

